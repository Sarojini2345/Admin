<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bench Employee's List</title>
    <link rel="stylesheet" href="/css/BenchEmp.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <Script src="/js/benchEmp.js"></script>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    
</head>
<body>

<div class="sidebar-container" id="sidebar">
		<div class="toggle-icon" onclick="toggleSidebar()">
			<i class="fas fa-bars"></i>
		</div>
		<ul class="menu-container" id="maincontent">
			<li class="menu-item "><a href="/dashboard" class="menu-link">
					<i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
			<li class="menu-item"><a href="/projectMaster" class="menu-link">
					<i class="fas fa-project-diagram"></i><span>Project Master</span></a></li>
			<li class="menu-item"><a href="/hello" class="menu-link">
					<i class="fas fa-user"></i><span>Employee Allocation</span></a></li>
			<li class="menu-item active"><a href="/benchEmp" class="menu-link">
					<i class="fas fa-user-clock"></i><span>Bench Employees</span></a></li>
			<li class="menu-item "><a href="/history" class="menu-link">
					<i class="fas fa-history"></i><span>History</span></a></li>
			<li class="menu-item"><a href="/Timesheet" class="menu-link">
					<i class="fas fa-clock"></i><span>Timesheet</span></a></li>
		</ul>
	</div>
 
<div class="header">
    <img src="https://ldtech.in/wp-content/uploads/2024/01/logo.png" alt="Logo" class="headerlogo">
    <h3 id="header-text">Bench Employee</h3>
    <a href="/getHome" class="btn"><i class="fa fa-home"></i></a>
</div>
 
<div class="container">
    <h2>Bench Employee's List</h2>
    <form class="form-container">
        <div class="search-field">
            <label>Emp ID</label>
            <div class="input-container">
                <input type="text" name="empId" id="employeeId" placeholder="Search by Emp ID" />
                <span class="search-icon" id="search-icon1"></span>
            </div>
        </div>
 
        <div class="search-field">
            <label>Dept</label>
            <div class="input-container">
                <input type="text" id="dept" name="dept" placeholder="Search by Dept" />
                <span class="search-icon" id="search-icon2"></span>
            </div>
        </div>
 
        <div class="search-field">
            <label>Emp Name</label>
            <div class="input-container">
                <input type="text" id="empNames" name="empName" placeholder="Search by Emp Name" />
                <span class="search-icon" id="search-icon3"></span>
            </div>
        </div>
 
       
 
        
 
    </form>
    <div class="result-box">
        <div class="search-result">
            <table id="data-table" class="table table-bordered">
                <thead>
                    <tr>
                        <th>Emp ID</th>
                        <th>Emp Name</th>
                        <th>Designation</th>
                        <th>Last Allocation Date</th>
                        <th>Unallocated Duration</th>
                    </tr>
                </thead>
                <tbody>                  
                </tbody>
            </table>
        </div>
    </div>
</div>
<script>
    // Fetch JSON data from backend
    fetch('/getbenchEmp')
        .then(response => response.json())
        .then(data => {
            // Populate table with data
            const tableBody = document.querySelector('#data-table tbody');
            data.forEach(employee => {
                // Calculate unallocated duration
                const lastAllocationDate = new Date(employee.all_end_date);
                const today = new Date();
                const diffTime = Math.abs(today - lastAllocationDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                // Create table row
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${employee.employee_id}</td>
                    <td>${employee.employee_name}</td>
                    <td>${employee.designation}</td>
                    <td>${employee.all_end_date}</td>
                    <td>${diffDays} days</td>
                `;
                tableBody.appendChild(row);
            });
        })
        .catch(error => console.error('Error fetching data:', error));
</script>
</body>
</html>
 