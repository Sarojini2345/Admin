<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Employee Dashboard</title>
	<link rel="stylesheet" type="text/css" href="/css/Timesheet.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<script>

	function addNewRow() {
		var table = document.querySelector("table");
		var newRow = table.insertRow(table.rows.length);

		// Add cells to the new row
		var cell1 = newRow.insertCell(0);
		var cell2 = newRow.insertCell(1);
		var cell3 = newRow.insertCell(2);
		var cell4 = newRow.insertCell(3);
		var cell5 = newRow.insertCell(4);
		var cell6 = newRow.insertCell(5);
		var cell7 = newRow.insertCell(6);
		var cell8 = newRow.insertCell(7);

		// Add input fields to cells
		cell1.innerHTML = '<input type="date" name="newDate">';
		cell2.innerHTML = '<input type="time" name="loginTime">';
		cell3.innerHTML = '<input type="time" name="logoutTime">';
		cell4.innerHTML = '<select name="projectType"><option value="" disabled selected>Select project type</option></select>';
		cell5.innerHTML = '<input type="text" name="newClient">';
		cell6.innerHTML = '<input type="time" name="activityHour">';
		cell7.innerHTML = '<input type="text" name="newStatus">';
		cell8.innerHTML = '<button type="button" onclick="saveNewRow(this)">Save</button>' +
			'<button type="button" onclick="cancelNewRow(this)">Cancel</button>';
	}

	function saveNewRow(button) {
		var newRow = button.parentNode.parentNode;
		var newDate = newRow.cells[0].querySelector('input').value;
		var loginTime = newRow.cells[1].querySelector('input').value;
		var logoutTime = newRow.cells[2].querySelector('input').value;
		var projectType = newRow.cells[3].querySelector('select').value;
		var client = newRow.cells[4].querySelector('input').value;
		var activityHour = newRow.cells[5].querySelector('input').value;
		var newStatus = newRow.cells[6].querySelector('input').value;

		// TODO: Send this data to the server (Java backend) for saving to the database
		// You can use AJAX or fetch API to send a request to the server.

		// After saving to the database, update the UI with edit and delete buttons
		newRow.cells[7].innerHTML = '<button type="button" onclick="editRow(this)">Edit</button>' +
			'<button type="button" onclick="deleteRow(this)">Delete</button>';

		// Optionally, you can also update the UI with the saved data
		newRow.cells[0].innerHTML = newDate;
		newRow.cells[1].innerHTML = loginTime;
		newRow.cells[2].innerHTML = projectType;
		newRow.cells[3].innerHTML = projectType;
		newRow.cells[4].innerHTML = client;
		newRow.cells[5].innerHTML = activityHour;
		newRow.cells[6].innerHTML = newStatus;
	}

	function editRow(button) {
		var row = button.parentNode.parentNode;

		// Save the original content of each cell
		for (var i = 0; i < row.cells.length - 1; i++) {
			var cell = row.cells[i];
			cell.setAttribute("data-original-content", cell.innerHTML);
		}

		// Replace the content with input fields for editing
		for (var i = 0; i < row.cells.length - 1; i++) {
			var cell = row.cells[i];
			cell.innerHTML = '<input type="text" value="' + cell.getAttribute("data-original-content") + '">';
		}

		// Replace the Edit button with Save and Cancel buttons
		var saveButton = document.createElement('button');
		saveButton.innerHTML = 'Save';
		saveButton.onclick = function () {saveEditedRow(row);};

		var cancelButton = document.createElement('button');
		cancelButton.innerHTML = 'Cancel';
		cancelButton.onclick = function () {cancelEditRow(row);};

		row.cells[row.cells.length - 1].innerHTML = '';
		row.cells[row.cells.length - 1].appendChild(saveButton);
		row.cells[row.cells.length - 1].appendChild(cancelButton);
	}
	function saveEditedRow(row) {
		// Extract data from the edited row
		for (var i = 0; i < row.cells.length - 1; i++) {
			var cell = row.cells[i];
			cell.innerHTML = cell.querySelector('input').value;
		}

		// Replace Save and Cancel buttons with Edit button
		var editButton = document.createElement('button');
		editButton.innerHTML = 'Edit';
		editButton.onclick = function () {editRow(this);};

		var deleteButton = document.createElement('button');
		deleteButton.innerHTML = 'Delete';
		deleteButton.onclick = function () {deleteRow(this);};

		row.cells[row.cells.length - 1].innerHTML = '';
		row.cells[row.cells.length - 1].appendChild(editButton);
		row.cells[row.cells.length - 1].appendChild(deleteButton);
	}
	function cancelEditRow(row) {
		// Restore the original content of each cell
		for (var i = 0; i < row.cells.length - 1; i++) {
			var cell = row.cells[i];
			cell.innerHTML = cell.getAttribute("data-original-content");
		}

		// Replace Save and Cancel buttons with Edit button
		var editButton = document.createElement('button');
		editButton.innerHTML = 'Edit';
		editButton.onclick = function () {editRow(this);};

		var deleteButton = document.createElement('button');
		deleteButton.innerHTML = 'Delete';
		deleteButton.onclick = function () {deleteRow(this);};

		row.cells[row.cells.length - 1].innerHTML = '';
		row.cells[row.cells.length - 1].appendChild(editButton);
		row.cells[row.cells.length - 1].appendChild(deleteButton);
	}
	function cancelNewRow(button) {
		var newRow = button.parentNode.parentNode;
		newRow.parentNode.removeChild(newRow);
	}
	function deleteRow(button) {
		var row = button.parentNode.parentNode;
		row.parentNode.removeChild(row);
	}
</script>
<body>

     

	<div class="header">
		<img src="https://ldtech.in/wp-content/uploads/2024/01/logo.png" alt="Logo" class="headerlogo">
		<h3 id="header-text">TimeSheet</h3>
		<a href="/getHome" class="btn"><i class="fa fa-home"></i></a>
	</div>
	
	 <!-- Sidebar -->
<div class="def">
	 
       	<div class="sidebar-container" id="sidebar">
		<div class="toggle-icon" onclick="toggleSidebar()">
			<i class="fas fa-bars"></i>
		</div>
		<ul class="menu-container" id="maincontent">
			<li class="menu-item "><a href="/dashboard" class="menu-link">
					<i class="fas fa-tachometer-alt"></i><span>Dashboard</span></a></li>
			<li class="menu-item"><a href="/projectMaster" class="menu-link">
					<i class="fas fa-project-diagram"></i><span>Project Master</span></a></li>
			<li class="menu-item"><a href="/hello" class="menu-link">
					<i class="fas fa-user"></i><span>Employee Allocation</span></a></li>
			<li class="menu-item"><a href="/benchEmp" class="menu-link">
					<i class="fas fa-user-clock"></i><span>Bench Employees</span></a></li>
			<li class="menu-item "><a href="/history" class="menu-link">
					<i class="fas fa-history"></i><span>History</span></a></li>
			<li class="menu-item  active"><a href="/Timesheet" class="menu-link">
					<i class="fas fa-clock"></i><span>Timesheet</span></a></li>
		</ul>
	</div>

	<!-- Employee Dashboard Section -->
	<div class="abc">
	
	<div class="container">     
         
		<!-- Employee Dashboard Info (Left) -->
		<div class="employee-info">
			<h2 style="color: red;">My TimeSheet</h2>
			<p>Employee Name:</p>
			<p>Role:</p>
			<p>Project:</p>
			<p>Reporting Manager:</p>
		</div>
				
		<!-- Calendar and Status Info (Right) -->
		<div class="date-div">
			<div class="week-start">
				<label for="weekStartDate">Week Start Date:</label>
				<input type="date" id="weekStartDate" name="weekStartDate" style="color: #310803;">
			</div>
			<div class="week-start">
				<label for="weekEndDate">Week End Date:</label>
				<input type="date" id="weekEndDate" name="weekEndDate" style="color: #310803;">
			</div>
			<div class="week-start">
				<label for="timesheet_approve">Timesheet Approval Status:</label>
				<input type="text" id="timesheetStatus" readonly>
			</div>
			<div class="navigation">
				<button type="button" onclick="addNewRow()">Add New</button>
			</div>
		</div>
	</div>
	<hr style="width: 100%; height:20% black; margin: 10px 10px;">

	<!-- Fetched Data Table Section -->
	<section>
		<!-- Table Structure -->
		<table>
			<thead>
				<tr>
					<th>Date</th>
					<th>Login</th>
					<th>Logout</th>
					<th>Project</th>
					<th>Client</th>
					<th>Activity Hour</th>
					<th>Status</th>
					<th>Action</th>
				</tr>
			</thead>
			<tbody>
				<!-- Add fetched data rows dynamically here -->
				<tr>
					<td>25-01-2024</td>
					<td>09:00 AM</td>
					<td>05:00 PM</td>
					<td>Project A</td>
					<td>Client X</td>
					<td>8</td>
					<td>Approved</td>
				</tr>
			</tbody>
		</table>
	</section>

	<div class="totalHour-div">
		<label>Total Activity Hours:</label>
		<input type="text" id="totalActivityHours" readonly>
	</div>	
</div>
</div>
<script>
function toggleSidebar() {
	const sidebar = document.getElementById('sidebar');
	const maincontent = document.getElementById('maincontent');
	const menuItems = document.querySelectorAll('.menu-item');

	// Toggle minimized class for sidebar and maincontent
	sidebar.classList.toggle('minimized');
	maincontent.classList.toggle('minimized');

	// Toggle minimized class for menu items
	menuItems.forEach(item => {
		item.classList.toggle('minimized');
	});
}
</script>
</body>

</html>